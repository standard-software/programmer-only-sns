(this["webpackJsonpprogrammer-only-sns"]=this["webpackJsonpprogrammer-only-sns"]||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(9),s=n.n(c),o=(n(15),n(10)),i=n(8),u=n(5),l=n(1),p=n.n(l),d=n(3),j=n(4),b=n.n(j),f=n(0),h=b.a.string,m=h.subFirst,x=h.isFirst,O=function(e){return Object(j.dateToString)(Object(j.stringToDate)(e,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"MM/DD HH:mm:ss")},v=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){n=e}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e,t){var n=t.findIndex((function(t){return x(t.id,e)}));return-1===n?"":t[n].id},y=function(e,t){var n=t.findIndex((function(t){return x(t.commentId,e)}));return-1===n?"":t[n].commentId},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(u.a)(c,2),l=s[0],b=s[1],h=Object(r.useState)(""),x=Object(u.a)(h,2),g=x[0],T=x[1],I=Object(r.useState)(""),S=Object(u.a)(I,2),w=S[0],k=S[1],C=Object(r.useState)(""),N=Object(u.a)(C,2),A=N[0],F=N[1],D=Object(r.useState)(""),P=Object(u.a)(D,2),U=P[0],H=P[1],Y=Object(r.useState)(""),M=Object(u.a)(Y,2),E=M[0],J=M[1],L=function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,c,s,u,l,d,f,h,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v("https://versatileapi.herokuapp.com/api/user/all/");case 3:n=e.sent,r=Object(i.a)(n);try{for(r.s();!(a=r.n()).done;)c=a.value,t.push(Object(o.a)({},c))}catch(p){r.e(p)}finally{r.f()}return b(t),s=localStorage.getItem("posns_block_user_ids"),u="https://versatileapi.herokuapp.com/api/text/all/?$orderby=_created_at desc&$limit=5000"+(Object(j.isNull)(s)?"":"&$filter=_user_id ne "+s.split(",").map((function(e){return"'".concat(_(e,t),"'")})).join(" and _user_id ne ")),l=[],e.next=12,v(u);case 12:d=e.sent,f=Object(i.a)(d);try{for(x=function(){var e,n,r,a,c=h.value;l.push({userName:null!==(e=null===(n=t.find((function(e){return e.id===c._user_id})))||void 0===n?void 0:n.name)&&void 0!==e?e:"",replyToUserName:Object(j.isUndefined)(c.in_reply_to_user_id)?"":null!==(r=null===(a=t.find((function(e){return e.id===c.in_reply_to_user_id})))||void 0===a?void 0:a.name)&&void 0!==r?r:"-",replyToTextId:Object(j.isUndefined)(c.in_reply_to_text_id)?"":m(c.in_reply_to_text_id,8),item:c,userId:c._user_id,createdAt:O(c._created_at),updatedAt:O(c._updated_at),commentId:c.id,text:c.text})},f.s();!(h=f.n()).done;)x()}catch(p){f.e(p)}finally{f.f()}return l.reverse(),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(p.a.mark((function e(t,n,r){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={text:t},""!==n&&(a.in_reply_to_user_id=n),""!==r&&(a.in_reply_to_text_id=r),e.next=5,fetch("https://versatileapi.herokuapp.com/api/text",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"HelloWorld"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://versatileapi.herokuapp.com/api/user/create_user",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"HelloWorld"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({name:t,description:n})});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,L();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()};return Object(r.useEffect)((function(){Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,L();case 3:e.t1=e.sent,(0,e.t0)(e.t1),t={name:Object(j.initialValue)(localStorage.getItem("posns_username"),"",[null]),description:Object(j.initialValue)(localStorage.getItem("posns_userdesc"),"",[null])},k(t.name),F(t.description);case 8:case"end":return e.stop()}}),e)})))()}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsxs)("div",{children:[n.map((function(e,t){return Object(f.jsxs)("div",{children:[e.createdAt===e.updatedAt?"".concat(e.createdAt):"".concat(e.createdAt,"|").concat(e.updatedAt),"[".concat(m(e.commentId,8),"]"),Object(f.jsx)("br",{}),"".concat(e.userName," [").concat(m(e.userId,10),"] "),Object(f.jsx)("br",{}),""===e.replyToUserName&&""===e.replyToTextId?null:""===e.replyToTextId?Object(f.jsxs)(f.Fragment,{children:["TO:".concat(e.replyToUserName),Object(f.jsx)("br",{})]}):""===e.replyToUserName?Object(f.jsxs)(f.Fragment,{children:["REPLY:".concat(e.replyToTextId),Object(f.jsx)("br",{})]}):Object(f.jsxs)(f.Fragment,{children:["TO:".concat(e.replyToUserName," REPLY:").concat(e.replyToTextId),Object(f.jsx)("br",{})]}),e.text.split(/(\n)/).map((function(e){return"\n"===e?Object(f.jsx)("br",{}):e})),Object(f.jsx)("hr",{})]},e.commentId)})),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",value:w,onChange:function(e){k(e.target.value)},placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d"}),Object(f.jsx)("input",{type:"text",value:A,onChange:function(e){F(e.target.value)},placeholder:"\u81ea\u5df1\u7d39\u4ecb\u6587"}),Object(f.jsx)("button",{onClick:Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(w,A);case 2:localStorage.setItem("posns_username",w),localStorage.setItem("posns_userdesc",A),B();case 5:case"end":return e.stop()}}),e)}))),children:"\u30e6\u30fc\u30b6\u30fc\u540d\u8a2d\u5b9a"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",value:U,onChange:function(e){H(e.target.value)},placeholder:"\u8fd4\u4fe1\u30e6\u30fc\u30b6\u30fcID"}),Object(f.jsx)("input",{type:"text",value:E,onChange:function(e){J(e.target.value)},placeholder:"\u8fd4\u4fe1\u30c6\u30ad\u30b9\u30c8ID"}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{value:g,onChange:function(e){T(e.target.value)},placeholder:"\u6295\u7a3f\u5185\u5bb9"}),Object(f.jsx)("button",{onClick:Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===g){e.next=7;break}return e.next=3,$(g,_(U,l),y(E,n));case 3:e.sent,T(""),H(""),J("");case 7:B();case 8:case"end":return e.stop()}}),e)}))),children:"\u66f8\u304d\u8fbc\u307f/\u8868\u793a\u66f4\u65b0"}),Object(f.jsx)("br",{})]}),Object(f.jsx)("br",{})]})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),T()}},[[18,1,2]]]);
//# sourceMappingURL=main.707b081f.chunk.js.map