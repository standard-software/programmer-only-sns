(this["webpackJsonpprogrammer-only-sns"]=this["webpackJsonpprogrammer-only-sns"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(9),o=n.n(a),i=(n(14),n(6)),s=n(5),u=n(1),l=n.n(u),d=n(4),p=n(3),m=n.n(p),f=n(0),j=m.a.string,b=j.subFirst,h=j.isFirst,x=function(e){return Object(p.dateToString)(Object(p.stringToDate)(e,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"MM/DD HH:mm:ss")},O=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){n=e}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=t.findIndex((function(t){return h(t.id,e)}));return-1===n?"":t[n].id},y=function(e,t){var n=t.findIndex((function(t){return h(t.commentId,e)}));return-1===n?"":t[n].commentId},_=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),u=o[0],m=o[1],j=Object(r.useState)(""),h=Object(s.a)(j,2),_=h[0],g=h[1],I=Object(r.useState)(""),T=Object(s.a)(I,2),C=T[0],k=T[1],S=Object(r.useState)(""),w=Object(s.a)(S,2),N=w[0],A=w[1],F=Object(r.useState)(""),L=Object(s.a)(F,2),U=L[0],D=L[1],P=Object(r.useState)(""),H=Object(s.a)(P,2),Y=H[0],M=H[1],E=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,c,a,o,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("https://versatileapi.herokuapp.com/api/user/all/");case 2:return t=e.sent,m(t),n=localStorage.getItem("posns_block_user_ids"),r="https://versatileapi.herokuapp.com/api/text/all/?$orderby=_created_at desc&$limit=5000"+(Object(p.isNull)(n)?"":"&$filter=_user_id ne "+n.split(",").map((function(e){return"'".concat(v(e,t),"'")})).join(" and _user_id ne ")),e.next=8,O("https://versatileapi.herokuapp.com/api/like/all/");case 8:return c=e.sent,a=[],e.next=12,O(r);case 12:o=e.sent,s=Object(i.a)(o);try{for(d=function(){var e,n,r,o,i=u.value,s=Object(p.sum)(c.filter((function(e){return e.id===i.id})).map((function(e){return e.like_count})));a.push({userName:null!==(e=null===(n=t.find((function(e){return e.id===i._user_id})))||void 0===n?void 0:n.name)&&void 0!==e?e:"",replyToUserName:Object(p.isUndefined)(i.in_reply_to_user_id)?"":null!==(r=null===(o=t.find((function(e){return e.id===i.in_reply_to_user_id})))||void 0===o?void 0:o.name)&&void 0!==r?r:"-",replyToTextId:Object(p.isUndefined)(i.in_reply_to_text_id)?"":b(i.in_reply_to_text_id,8),_replyToTextId:i.in_reply_to_text_id,item:i,userId:i._user_id,createdAt:x(i._created_at),updatedAt:x(i._updated_at),commentId:i.id,text:i.text,likeCount:s,childComment:[]})},s.s();!(u=s.n()).done;)d()}catch(l){s.e(l)}finally{s.f()}return a.reverse(),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={text:t},""!==n&&(c.in_reply_to_user_id=n),""!==r&&(c.in_reply_to_text_id=r),e.next=5,fetch("https://versatileapi.herokuapp.com/api/text",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"HelloWorld"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(c)});case 5:return a=e.sent,e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://versatileapi.herokuapp.com/api/user/create_user",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"HelloWorld"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({name:t,description:n})});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,E();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()};Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,E();case 3:e.t1=e.sent,(0,e.t0)(e.t1),t={name:Object(p.initialValue)(localStorage.getItem("posns_username"),"",[null]),description:Object(p.initialValue)(localStorage.getItem("posns_userdesc"),"",[null])},k(t.name),A(t.description);case 8:case"end":return e.stop()}}),e)})))()}),[]);var B,R=function(e){return Object(f.jsxs)(f.Fragment,{children:[e.createdAt===e.updatedAt?"".concat(e.createdAt):"".concat(e.createdAt,"|").concat(e.updatedAt),"[".concat(b(e.commentId,8),"]"),"".concat(0!==e.likeCount?" Like:"+e.likeCount:""),Object(f.jsx)("br",{}),"".concat(e.userName," [").concat(b(e.userId,10),"] "),Object(f.jsx)("br",{}),""===e.replyToUserName&&""===e.replyToTextId?null:""===e.replyToTextId?Object(f.jsxs)(f.Fragment,{children:["TO:".concat(e.replyToUserName),Object(f.jsx)("br",{})]}):""===e.replyToUserName?Object(f.jsxs)(f.Fragment,{children:["REPLY:".concat(e.replyToTextId),Object(f.jsx)("br",{})]}):Object(f.jsxs)(f.Fragment,{children:["TO:".concat(e.replyToUserName," REPLY:").concat(e.replyToTextId),Object(f.jsx)("br",{})]}),e.text]})},V=n.filter((function(e){return Object(p.isUndefined)(e._replyToTextId)||Object(p.isUndefined)(n.find((function(t){return t.commentId===e._replyToTextId})))})),W=Object(i.a)(V);try{var Z=function(){var e=B.value;e.childComment=n.filter((function(t){return t._replyToTextId===e.commentId}));var t,r=Object(i.a)(e.childComment);try{var c=function(){var e=t.value;e.childComment=n.filter((function(t){return t._replyToTextId===e.commentId}));var r,c=Object(i.a)(e.childComment);try{var a=function(){var e=r.value;e.childComment=n.filter((function(t){return t._replyToTextId===e.commentId}));var t,c=Object(i.a)(e.childComment);try{var a=function(){var e=t.value;e.childComment=n.filter((function(t){return t._replyToTextId===e.commentId}));var r,c=Object(i.a)(e.childComment);try{var a=function(){var e=r.value;e.childComment=n.filter((function(t){return t._replyToTextId===e.commentId}))};for(c.s();!(r=c.n()).done;)a()}catch(o){c.e(o)}finally{c.f()}};for(c.s();!(t=c.n()).done;)a()}catch(o){c.e(o)}finally{c.f()}};for(c.s();!(r=c.n()).done;)a()}catch(o){c.e(o)}finally{c.f()}};for(r.s();!(t=r.n()).done;)c()}catch(a){r.e(a)}finally{r.f()}};for(W.s();!(B=W.n()).done;)Z()}catch(q){W.e(q)}finally{W.f()}return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsxs)("div",{children:[V.map((function(e,t){return Object(f.jsxs)("div",{children:[R(e),e.childComment.map((function(e){return Object(f.jsxs)("div",{style:{marginLeft:"20px"},children:[R(e),e.childComment.map((function(e){return Object(f.jsxs)("div",{style:{marginLeft:"40px"},children:[R(e),e.childComment.map((function(e){return Object(f.jsxs)("div",{style:{marginLeft:"60px"},children:[R(e),e.childComment.map((function(e){return Object(f.jsxs)("div",{style:{marginLeft:"80px"},children:[R(e),e.childComment.map((function(e){return Object(f.jsx)("div",{style:{marginLeft:"100px"},children:R(e)},e.commentId)}))]},e.commentId)}))]},e.commentId)}))]},e.commentId)}))]},e.commentId)})),Object(f.jsx)("hr",{})]},e.commentId)})),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",value:C,onChange:function(e){k(e.target.value)},placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d"}),Object(f.jsx)("input",{type:"text",value:N,onChange:function(e){A(e.target.value)},placeholder:"\u81ea\u5df1\u7d39\u4ecb\u6587"}),Object(f.jsx)("button",{onClick:Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(C,N);case 2:localStorage.setItem("posns_username",C),localStorage.setItem("posns_userdesc",N),z();case 5:case"end":return e.stop()}}),e)}))),children:"\u30e6\u30fc\u30b6\u30fc\u540d\u8a2d\u5b9a"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",value:U,onChange:function(e){D(e.target.value)},placeholder:"\u8fd4\u4fe1\u30e6\u30fc\u30b6\u30fcID"}),Object(f.jsx)("input",{type:"text",value:Y,onChange:function(e){M(e.target.value)},placeholder:"\u8fd4\u4fe1\u30c6\u30ad\u30b9\u30c8ID"}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{value:_,onChange:function(e){g(e.target.value)},placeholder:"\u6295\u7a3f\u5185\u5bb9"}),Object(f.jsx)("button",{onClick:Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===_){e.next=7;break}return e.next=3,J(_,v(U,u),y(Y,n));case 3:e.sent,g(""),D(""),M("");case 7:z();case 8:case"end":return e.stop()}}),e)}))),children:"\u66f8\u304d\u8fbc\u307f/\u8868\u793a\u66f4\u65b0"}),Object(f.jsx)("br",{})]}),Object(f.jsx)("br",{})]})})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root")),g()}},[[17,1,2]]]);
//# sourceMappingURL=main.a9b2e014.chunk.js.map